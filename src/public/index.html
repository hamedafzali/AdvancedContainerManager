<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Container Manager</title>
    <meta name="description" content="Professional web-based container management platform">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none'><path d='M12 2C6.48 2 2 7.52 2 12 7s4.52 5 10 5 10 5 4.48 0 9.52 2 12 2zm1 41h6c.83 0 1.5-.67 1.5-1.5h-6c-.83 0-1.5-.67-1.5-1.5zM10 6c.83 0 1.5-.67 1.5-1.5h-6c-.83 0-1.5-.67-1.5-1.5zm0 6c0 1.1-.9 2-2 2s-.9 2-2 2-.9-2-2-2zm0-8c-1.1-.9-2-2-2s-.9-2-2-2-.9-2-2-2zm0 8c0 1.1.9 2 2 2s-.9 2-2 2-.9 2-2 2zm0 8c0 .55-.45 1-1 1-1h6c.55 0 1-.45 1-1 1h-6c-.55 0-1-.45-1-1-1zm0-8c-.55 0-1-.45-1-1h-6c-.55 0-1 .45-1 1h6c.55 0 1 .45 1 1 1z' fill='currentColor'/></svg>">
    <style>
        .glass-morphism {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .status-running { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .status-stopped { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .status-paused { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
        .status-building { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); }
        .sidebar-item {
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }
        .sidebar-item:hover {
            background: rgba(99, 102, 241, 0.1);
            border-left-color: #6366f1;
        }
        .sidebar-item.active {
            background: rgba(99, 102, 241, 0.15);
            border-left-color: #6366f1;
        }
        .container-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .container-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .container-card.running { border-left-color: #10b981; }
        .container-card.exited { border-left-color: #ef4444; }
        .container-card.paused { border-left-color: #f59e0b; }
        .container-card.restarting { border-left-color: #8b5cf6; }
        .terminal-container {
            background: #1e1e1e1;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            height: 400px;
            overflow-y: auto;
        }
        .pulse-dot {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Sidebar Navigation -->
    <nav class="fixed left-0 top-0 h-full w-64 bg-white shadow-lg z-40">
        <div class="flex items-center p-6 border-b border-gray-200">
            <div class="flex items-center">
                <div class="w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                    <i data-lucide="layers" class="w-6 h-6 text-white"></i>
                </div>
                <div class="ml-3">
                    <h1 class="text-lg font-bold text-gray-900">Container Manager</h1>
                    <p class="text-xs text-gray-500">Advanced Edition</p>
                </div>
            </div>
        </div>
        
        <nav class="p-4">
            <a href="/" class="sidebar-item active flex items-center px-4 py-3 text-gray-700 rounded-lg mb-2">
                <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
                Dashboard
            </a>
            <a href="/containers" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg mb-2">
                <i data-lucide="package-2" class="w-5 h-5 mr-3"></i>
                Containers
            </a>
            <a href="/projects" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg mb-2">
                <i data-lucide="folder" class="w-5 h-5 mr-3"></i>
                Projects
            </a>
            <a href="/images" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg mb-2">
                <i data-lucide="image" class="w-5 h-5 mr-3"></i>
                Images
            </a>
            <a href="/networks" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg mb-2">
                <i data-lucide="network" class="w-5 h-5 mr-3"></i>
                Networks
            </a>
            <a href="/volumes" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg mb-2">
                <i data-lucide="hard-drive" class="w-5 h-5 mr-3"></i>
                Volumes
            </a>
            <a href="/terminal" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg mb-2">
                <i data-lucide="terminal" class="w-5 h-5 mr-3"></i>
                Terminal
            </a>
            <a href="/settings" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg mb-2">
                <i data-lucide="settings" class="w-5 h-5 mr-3"></i>
                Settings
            </a>
        </nav>
        
        <!-- System Status -->
        <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-gray-600">System Status</span>
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-green-500 rounded-full pulse-dot"></div>
                    <span class="text-xs text-green-600">Online</span>
                </div>
            </div>
            <div class="flex items-center justify-between text-xs text-gray-500">
                <div>Docker: <span id="docker-status" class="text-green-600">Connected</span></div>
                <div>Uptime: <span id="system-uptime">0m 0s</span></div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="ml-64">
        <!-- Top Bar -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="flex items-center justify-between px-6 py-4">
                <div class="flex items-center space-x-4">
                    <h2 class="text-2xl font-bold text-gray-900">Dashboard</h2>
                    <span class="px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800">
                        Live
                    </span>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" placeholder="Search containers..." 
                               class="w-64 px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <i data-lucide="search" class="w-4 h-4 text-gray-400 absolute left-3 top-3"></i>
                    </div>
                    
                    <button onclick="showAddProjectModal()" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 flex items-center">
                        <i data-lucide="plus" class="w-4 h-4 mr-2"></i>
                        Add Project
                    </button>
                </div>
            </div>
        </header>

        <!-- Dashboard Content -->
        <main class="p-6">
            <!-- System Metrics Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="metric-card rounded-xl p-6 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm font-medium">CPU Usage</p>
                            <p class="text-3xl font-bold mt-2" id="cpu-metric">0%</p>
                            <p class="text-white/60 text-xs mt-1">
                                <i data-lucide="trending-up" class="w-3 h-3 inline mr-1"></i>
                                +5% from last hour
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
                            <i data-lucide="cpu" class="w-6 h-6 text-white"></i>
                        </div>
                    </div>
                </div>
                
                <div class="metric-card rounded-xl p-6 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm font-medium">Memory Usage</p>
                            <p class="text-3xl font-bold mt-2" id="memory-metric">0%</p>
                            <p class="text-white/60 text-xs mt-1">
                                <i data-lucide="trending-down" class="w-3 h-3 inline mr-1"></i>
                                -2% from last hour
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
                            <i data-lucide="memory-stick" class="w-6 h-6 text-white"></i>
                        </div>
                    </div>
                </div>
                
                <div class="metric-card rounded-xl p-6 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm font-medium">Running Containers</p>
                            <p class="text-3xl font-bold mt-2" id="containers-metric">0</p>
                            <p class="text-white/60 text-xs mt-1">
                                Total: <span id="total-containers">0</span>
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
                            <i data-lucide="package-2" class="w-6 h-6 text-white"></i>
                        </div>
                    </div>
                </div>
                
                <div class="metric-card rounded-xl p-6 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm font-medium">Active Projects</p>
                            <p class="text-3xl font-bold mt-2" id="projects-metric">0</p>
                            <p class="text-white/60 text-xs mt-1">
                                All healthy
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
                            <i data-lucide="folder" class="w-6 h-6 text-white"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- CPU & Memory Chart -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">System Performance</h3>
                        <select class="text-sm border border-gray-300 rounded-md px-3 py-1">
                            <option value="1">Last Hour</option>
                            <option value="6">Last 6 Hours</option>
                            <option value="24">Last 24 Hours</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>
                
                <!-- Container Status Chart -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Container Distribution</h3>
                        <button class="text-sm text-indigo-600 hover:text-indigo-800">
                            View Details
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="containerChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Recent Activity & Quick Actions -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Recent Activity -->
                <div class="lg:col-span-2 bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Recent Activity</h3>
                        <button class="text-sm text-gray-600 hover:text-gray-900">
                            View All
                        </button>
                    </div>
                    
                    <div class="space-y-4" id="activity-feed">
                        <div class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg">
                            <div class="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                            <div class="flex-1">
                                <p class="text-sm text-gray-900">
                                    <span class="font-medium">Doc2Pdf-Bot</span> container started
                                </p>
                                <p class="text-xs text-gray-500">2 minutes ago</p>
                            </div>
                            <span class="px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800">
                                Success
                            </span>
                        </div>
                        
                        <div class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg">
                            <div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                            <div class="flex-1">
                                <p class="text-sm text-gray-900">
                                    <span class="font-medium">Web-App</span> image built
                                </p>
                                <p class="text-xs text-gray-500">15 minutes ago</p>
                            </div>
                            <span class="px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800">
                                Build
                            </span>
                        </div>
                        
                        <div class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full mt-2"></div>
                            <div class="flex-1">
                                <p class="text-sm text-gray-900">
                                    <span class="font-medium">Database</span> container restarted
                                </p>
                                <p class="text-xs text-gray-500">1 hour ago</p>
                            </div>
                            <span class="px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800">
                                Warning
                            </span>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Quick Actions</h3>
                    
                    <div class="space-y-3">
                        <button onclick="showAddProjectModal()" class="w-full flex items-center justify-center px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition duration-300 flex items-center">
                            <i data-lucide="plus" class="w-4 h-4 mr-2"></i>
                            Add Project
                        </button>
                        
                        <button onclick="showDeployModal()" class="w-full flex items-center justify-center px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition duration-300 flex items-center">
                            <i data-lucide="rocket" class="w-4 h-4 mr-2"></i>
                            Quick Deploy
                        </button>
                        
                        <button onclick="showBackupModal()" class="w-full flex items-center justify-center px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition duration-300 flex items-center">
                            <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                            Create Backup
                        </button>
                        
                        <button onclick="showSettingsModal()" class="w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition duration-300 flex items-center">
                            <i data-lucide="settings" class="w-4 h-4 mr-2"></i>
                            System Settings
                        </button>
                    </div>
                    
                    <!-- Storage Info -->
                    <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-gray-700">Storage Usage</span>
                            <span class="text-sm text-gray-500">45%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-indigo-500 to-purple-600 h-2 rounded-full" style="width: 45%"></div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">23GB used of 50GB</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Project Modal -->
    <div id="addProjectModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-96 max-w-4xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Add New Project</h3>
                <form id="addProjectForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Project Name</label>
                        <input type="text" name="name" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Repository URL</label>
                        <input type="url" name="repo_url" required placeholder="https://github.com/user/repo.git" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Dockerfile Path</label>
                        <input type="text" name="dockerfile" value="Dockerfile" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Compose File</label>
                        <input type="text" name="compose_file" value="docker-compose.yml" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button type="button" onclick="hideAddProjectModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">
                            Cancel
                        </button>
                        <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">
                            Add Project
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="fixed top-4 right-4 z-50 space-y-2">
        <div class="bg-white rounded-lg shadow-lg p-4 flex items-center space-x-3">
            <div id="notification-icon"></div>
            <div>
                <p id="notification-message" class="text-sm font-medium text-gray-900"></p>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Socket.IO connection
        const socket = io();
        
        socket.on('connect', () => {
            console.log('Connected to Advanced Container Manager');
        });
        
        socket.on('system_status_update', (data) => {
            updateSystemStatus(data);
        });
        
        socket.on('container_metrics_update', (data) => {
            updateContainerMetrics(data);
        });
        
        socket.on('notification', (notification) => {
            showNotification(notification);
        });

        // Initialize charts
        initializeCharts();
        
        // Update system status periodically
        setInterval(updateSystemStatus, 5000);
        updateSystemStatus();

        // Modal functions
        function showAddProjectModal() {
            document.getElementById('addProjectModal').classList.remove('hidden');
        }

        function hideAddProjectModal() {
            document.getElementById('addProjectModal').classList.add('hidden');
            document.getElementById('addProjectForm').reset();
        }

        function showDeployModal() {
            showNotification('Deploy feature coming soon!', 'info');
        }

        function showBackupModal() {
            showNotification('Backup feature coming soon!', 'info');
        }

        function showSettingsModal() {
            showNotification('Settings panel coming soon!', 'info');
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification-container');
            const messageEl = document.getElementById('notification-message');
            const iconEl = document.getElementById('notification-icon');
            
            messageEl.textContent = message;
            
            if (type === 'success') {
                iconEl.innerHTML = '<i data-lucide="check-circle" class="w-5 h-5 text-green-500"></i>';
            } else if (type === 'error') {
                iconEl.innerHTML = '<i data-lucide="alert-circle" class="w-5 h-5 text-red-500"></i>';
            }
            else {
                iconEl.innerHTML = '<i data-lucide="info" class="w-5 h-5 text-blue-500"></i>';
            }
            
            notification.classList.remove('hidden');
            lucide.createIcons();
            
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 3000);
        }

        // Initialize charts
        function initializeCharts() {
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            const containerCtx = document.getElementById('containerChart').getContext('2d');
            
            // Performance chart
            new Chart(performanceCtx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 12}, (_, i) => `${i * 5}m ago`),
                    datasets: [{
                        label: 'CPU %',
                        data: [30, 35, 40, 38, 42, 45, 43, 47, 44, 46, 45],
                        borderColor: 'rgb(99, 102, 241)',
                        backgroundColor: 'rgba(99, 102, 241, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'Memory %',
                        data: [60, 62, 58, 65, 63, 68, 66, 70, 67, 69, 68, 72],
                        borderColor: 'rgb(168, 85, 247)',
                        backgroundColor: 'rgba(168, 85, 247, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
            
            // Container chart
            new Chart(containerCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Running', 'Stopped', 'Paused', 'Building'],
                    datasets: [{
                        data: [0, 0, 0, 0],
                        backgroundColor: [
                            'rgb(16, 185, 129)',
                            'rgb(239, 68, 68)',
                            'rgb(245, 158, 11)',
                            'rgb(139, 92, 246)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });
        }

        // Update system status
        async function updateSystemStatus() {
            try {
                const response = await fetch('/api/system/status');
                const status = await response.json();
                
                if (status.success) {
                    document.getElementById('docker-status').textContent = status.data.docker.connected ? 'Connected' : 'Disconnected';
                    document.getElementById('projects-count').textContent = status.data.metricsSummary.projectsCount;
                    document.getElementById('containers-count').textContent = status.data.metricsSummary.containersCount;
                    document.getElementById('running-count').textContent = status.data.metricsSummary.runningContainers;
                    
                    // Update metrics
                    if (status.data.metrics) {
                        document.getElementById('cpu-metric').textContent = `${status.data.metrics.cpuPercent.toFixed(1)}%`;
                        document.getElementById('memory-metric').textContent = `${status.data.metrics.memoryPercent.toFixed(1)}%`;
                        
                        // Update charts
                        updateCharts(status.data.metrics);
                    }
                }
            } catch (error) {
                console.error('Error updating system status:', error);
            }
        }

        // Update charts with new data
        function updateCharts(metrics) {
            const performanceChart = Chart.getChart('performanceChart');
            const containerChart = Chart.getChart('containerChart');
            
            if (performanceChart && metrics) {
                // Update performance chart
                if (performanceChart.data.labels.length > 11) {
                    performanceChart.data.labels.shift();
                    performanceChart.data.datasets[0].data.shift();
                    performanceChart.data.datasets[1].data.shift();
                }
                
                performanceChart.data.labels.push('Now');
                performanceChart.data.datasets[0].push(metrics.cpuPercent);
                performanceChart.data.datasets[1].push(metrics.memoryPercent);
                performanceChart.update('none');
            }
            
            if (containerChart && metrics) {
                const runningCount = metrics.runningContainers || 0;
                const stoppedCount = metrics.stoppedContainers || 0;
                const pausedCount = metrics.pausedContainers || 0;
                const buildingCount = metrics.buildingContainers || 0;
                
                containerChart.data.datasets[0].data = [runningCount, stoppedCount, pausedCount, buildingCount];
                containerChart.update('none');
            }
        }

        // Auto-refresh every 30 seconds
        setInterval(updateSystemStatus, 30000);
    </script>
</body>
</html>

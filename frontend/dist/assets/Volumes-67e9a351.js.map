{"version":3,"file":"Volumes-67e9a351.js","sources":["../../src/pages/Volumes.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport {\n  Search,\n  Plus,\n  Trash2,\n  HardDrive,\n  Database,\n} from \"lucide-react\";\nimport { apiUrl } from \"@/utils/api\";\n\ninterface Volume {\n  id: string;\n  name: string;\n  driver: string;\n  mountPoint: string;\n  created: string;\n  size: string;\n  containers: number;\n  labels: Record<string, string>;\n  status: \"active\" | \"inactive\";\n}\n\nexport default function Volumes() {\n  const [volumes, setVolumes] = useState<Volume[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const fetchVolumes = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(apiUrl(\"/api/volumes\"));\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch volumes\");\n      }\n      const result = await response.json();\n      const data = result.data;\n      \n      const transformedVolumes = data.map((volume: any) => ({\n        id: volume.name,\n        name: volume.name,\n        driver: volume.driver,\n        mountPoint: volume.mountpoint,\n        created: new Date(volume.created).toLocaleString(),\n        size: volume.usage?.Size \n          ? `${(volume.usage.Size / 1024 / 1024).toFixed(1)}MB`\n          : \"Unknown\",\n        containers: volume.usage?.RefCount || 0,\n        labels: volume.labels || {},\n        status: \"active\" as const,\n      }));\n\n      setVolumes(transformedVolumes);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to fetch volumes\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchVolumes();\n    const interval = setInterval(fetchVolumes, 10000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const filteredVolumes = volumes.filter(volume =>\n    volume.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    volume.driver.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleCreateVolume = async () => {\n    const name = prompt(\"Enter volume name:\");\n    if (!name) return;\n\n    try {\n      const response = await fetch(apiUrl(\"/api/volumes\"), {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ name }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to create volume\");\n      }\n\n      await fetchVolumes();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to create volume\");\n    }\n  };\n\n  const handleDelete = async (volumeId: string) => {\n    if (!confirm(\"Are you sure you want to delete this volume?\")) {\n      return;\n    }\n\n    try {\n      const response = await fetch(apiUrl(`/api/volumes/${volumeId}`), {\n        method: \"DELETE\",\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to delete volume\");\n      }\n\n      await fetchVolumes();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to delete volume\");\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <h2 className=\"text-xl font-light text-gray-900 mb-2\">Loading Volumes...</h2>\n          <p className=\"text-gray-500\">Fetching Docker volumes</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <Database className=\"w-8 h-8 text-red-600\" />\n          </div>\n          <h2 className=\"text-xl font-light text-gray-900 mb-2\">Error Loading Volumes</h2>\n          <p className=\"text-gray-500 mb-4\">{error}</p>\n          <button\n            onClick={fetchVolumes}\n            className=\"px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-lg transition-colors duration-200\"\n          >\n            Retry\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-6 py-8\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <h1 className=\"text-3xl font-light text-gray-900 tracking-tight\">Volumes</h1>\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"relative\">\n              <Search className=\"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search volumes...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n            </div>\n            <button\n              onClick={handleCreateVolume}\n              className=\"flex items-center px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-lg transition-colors duration-200\"\n            >\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Create Volume\n            </button>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredVolumes.map((volume) => (\n            <div key={volume.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"flex items-center\">\n                  <div className={`w-3 h-3 rounded-full mr-2 ${volume.status === 'active' ? 'bg-green-500' : 'bg-gray-400'}`}></div>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">{volume.name}</h3>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <button \n                    onClick={() => handleDelete(volume.id)}\n                    className=\"p-1 hover:bg-gray-100 rounded\"\n                  >\n                    <Trash2 className=\"w-4 h-4 text-gray-500\" />\n                  </button>\n                </div>\n              </div>\n              \n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-gray-500\">Driver:</span>\n                  <span className=\"font-medium\">{volume.driver}</span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-gray-500\">Mount Point:</span>\n                  <span className=\"font-medium text-xs truncate max-w-[150px]\" title={volume.mountPoint}>\n                    {volume.mountPoint}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-gray-500\">Size:</span>\n                  <span className=\"font-medium\">{volume.size}</span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-gray-500\">Containers:</span>\n                  <span className=\"font-medium\">{volume.containers}</span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-gray-500\">Created:</span>\n                  <span className=\"font-medium\">{volume.created}</span>\n                </div>\n                {Object.keys(volume.labels).length > 0 && (\n                  <div className=\"flex items-start justify-between text-sm\">\n                    <span className=\"text-gray-500\">Labels:</span>\n                    <div className=\"flex flex-wrap gap-1 max-w-[150px]\">\n                      {Object.entries(volume.labels).slice(0, 2).map(([key, value]) => (\n                        <span key={key} className=\"text-xs bg-gray-100 px-1 py-0.5 rounded\" title={`${key}: ${value}`}>\n                          {key}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {filteredVolumes.length === 0 && (\n          <div className=\"text-center py-12\">\n            <HardDrive className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No volumes found</h3>\n            <p className=\"text-gray-500\">Get started by creating your first Docker volume</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["Volumes","volumes","setVolumes","useState","loading","setLoading","error","setError","searchTerm","setSearchTerm","fetchVolumes","response","apiUrl","transformedVolumes","volume","_a","_b","err","useEffect","interval","filteredVolumes","handleCreateVolume","name","handleDelete","volumeId","jsxs","jsx","Database","Search","e","Plus","Trash2","key","value","HardDrive"],"mappings":"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"}
import{j as e}from"./charts-aae23e34.js";import{r as n}from"./vendor-280e31ee.js";import{a as o}from"./api-f33f6490.js";import{R as f,P as K,S as Q,H as W,T as y,a as Y,X as Z}from"./index-e694318b.js";import{A as w}from"./alert-circle-c0f60a4e.js";import{C as E}from"./check-circle-c889db5c.js";import{X as R}from"./x-circle-edf1b60d.js";import{A as _}from"./activity-ce878ae7.js";import{C as ee}from"./clock-0bcd3380.js";import{E as se}from"./eye-835cbcdc.js";import{S as te}from"./square-9af4d20e.js";import{P as ae}from"./play-14f3b85d.js";import{T as re}from"./trash-2-539387ab.js";import{C as ne}from"./copy-14abb27d.js";import{D as ie}from"./download-fe859b1d.js";import"./utils-9456a7ed.js";function ve(){const[d,N]=n.useState([]),[T,b]=n.useState(!0),[v,x]=n.useState(null),[p,F]=n.useState(""),[u,D]=n.useState("all"),[P,C]=n.useState(!1),[c,$]=n.useState(null),[m,A]=n.useState([]),[U,k]=n.useState(!1),O=async s=>{try{k(!0);const a=await fetch(o(`/api/containers/${s}/logs`));if(!a.ok)throw new Error("Failed to fetch logs");const r=await a.json();A(r.data||[])}catch(a){x(a instanceof Error?a.message:"Failed to fetch logs")}finally{k(!1)}},M=s=>{$(s),C(!0),O(s.id)},H=()=>{const s=m.join(`
`);navigator.clipboard.writeText(s)},X=()=>{const s=m.join(`
`),a=new Blob([s],{type:"text/plain"}),r=URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=`${c==null?void 0:c.name}-logs-${new Date().toISOString()}.txt`,i.click(),URL.revokeObjectURL(r)},h=async()=>{try{b(!0);const s=await fetch(o("/api/containers"));if(!s.ok)throw new Error("Failed to fetch containers");const i=(await s.json()).data.map(t=>({id:t.id,name:t.name,image:t.image,status:t.status.toLowerCase(),ports:Object.keys(t.ports||{}).map(l=>l),cpu:0,memory:0,uptime:t.startedAt?new Date(t.startedAt).toLocaleString():"Never started",created:new Date(t.created*1e3).toLocaleString()}));N(i);const S=i.filter(t=>t.status==="running");for(const t of S)try{const l=await fetch(o(`/api/containers/${t.id}/stats`));if(l.ok){const L=await l.json();N(J=>J.map(j=>j.id===t.id?{...j,cpu:L.cpuPercent||0,memory:Math.round(L.memoryUsage/1024/1024*100)/100}:j))}}catch(l){console.error(`Failed to fetch stats for container ${t.id}:`,l)}}catch(s){x(s instanceof Error?s.message:"Failed to fetch containers")}finally{b(!1)}};n.useEffect(()=>{h();const s=setInterval(h,5e3);return()=>clearInterval(s)},[]);const B=s=>{switch(s){case"running":return e.jsx(E,{className:"w-4 h-4 text-green-600"});case"stopped":return e.jsx(R,{className:"w-4 h-4 text-red-600"});case"paused":return e.jsx(w,{className:"w-4 h-4 text-yellow-600"});case"restarting":return e.jsx(f,{className:"w-4 h-4 text-blue-600 animate-spin"});default:return null}},I=s=>{switch(s){case"running":return"text-green-600 bg-green-50";case"stopped":return"text-red-600 bg-red-50";case"paused":return"text-yellow-600 bg-yellow-50";case"restarting":return"text-blue-600 bg-blue-50";default:return"text-gray-600 bg-gray-50"}},g=async(s,a)=>{try{if(!d.find(i=>i.id===s))return;switch(a){case"start":if(!(await fetch(o(`/api/containers/${s}/start`),{method:"POST"})).ok)throw new Error("Failed to start container");break;case"stop":if(!(await fetch(o(`/api/containers/${s}/stop`),{method:"POST"})).ok)throw new Error("Failed to stop container");break;case"restart":if(!(await fetch(o(`/api/containers/${s}/restart`),{method:"POST"})).ok)throw new Error("Failed to restart container");break;case"delete":if(!confirm("Are you sure you want to delete this container?"))return;if(!(await fetch(o(`/api/containers/${s}`),{method:"DELETE"})).ok)throw new Error("Failed to delete container");break;default:throw new Error("Invalid action")}await h()}catch(r){x(r instanceof Error?r.message:"Failed to perform action"),setTimeout(()=>x(null),3e3)}},q=d.filter(s=>{const a=s.name.toLowerCase().includes(p.toLowerCase())||s.image.toLowerCase().includes(p.toLowerCase()),r=u==="all"||s.status===u;return a&&r}),z=d.filter(s=>s.status==="running").length,V=d.filter(s=>s.status==="stopped").length,G=d.filter(s=>s.status==="paused").length;return T?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"w-8 h-8 text-gray-400 animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-light text-gray-900 mb-2",children:"Loading Containers..."}),e.jsx("p",{className:"text-gray-500",children:"Fetching container information from Docker"})]})}):v?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(w,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-light text-gray-900 mb-2",children:"Error Loading Containers"}),e.jsx("p",{className:"text-gray-500 mb-4",children:v}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-lg transition-colors duration-200",children:"Retry"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8 space-y-8",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200",children:e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-light text-gray-900 tracking-tight",children:"Containers"}),e.jsx("p",{className:"text-gray-500 text-sm tracking-wide",children:"Manage and monitor Docker containers"})]}),e.jsxs("button",{className:"flex items-center px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white font-light rounded-lg transition-colors duration-200",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"New Container"]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-light text-gray-900",children:z}),e.jsx("div",{className:"text-sm text-gray-500",children:"Running"})]}),e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsx(E,{className:"w-5 h-5 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-light text-gray-900",children:V}),e.jsx("div",{className:"text-sm text-gray-500",children:"Stopped"})]}),e.jsx("div",{className:"p-3 bg-red-50 rounded-lg",children:e.jsx(R,{className:"w-5 h-5 text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-light text-gray-900",children:G}),e.jsx("div",{className:"text-sm text-gray-500",children:"Paused"})]}),e.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg",children:e.jsx(w,{className:"w-5 h-5 text-yellow-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Q,{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search containers...",value:p,onChange:s=>F(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-gray-900 focus:border-transparent"})]}),e.jsxs("select",{value:u,onChange:s=>D(s.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-gray-900 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"running",children:"Running"}),e.jsx("option",{value:"stopped",children:"Stopped"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"restarting",children:"Restarting"})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ports"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CPU"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Memory"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uptime"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:q.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",s.id]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 font-mono",children:s.image})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I(s.status)}`,children:[B(s.status),e.jsx("span",{className:"ml-1",children:s.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 font-mono",children:s.ports.join(", ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[s.cpu.toFixed(1),"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[s.memory,"MB"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.uptime})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>M(s),className:"p-1.5 text-gray-600 hover:bg-gray-50 rounded transition-colors duration-200",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{s.status==="running"?g(s.id,"stop"):g(s.id,"start")},className:`p-1.5 rounded transition-colors duration-200 ${s.status==="running"?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,children:s.status==="running"?e.jsx(te,{className:"w-4 h-4"}):e.jsx(ae,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(s.id,"restart"),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors duration-200",children:e.jsx(f,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 text-gray-600 hover:bg-gray-50 rounded transition-colors duration-200",children:e.jsx(y,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 text-gray-600 hover:bg-gray-50 rounded transition-colors duration-200",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(s.id,"delete"),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors duration-200",children:e.jsx(re,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]}),P&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-200 max-w-4xl w-full max-h-[80vh] m-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[c.name," - Logs"]}),e.jsx("p",{className:"text-sm text-gray-500",children:c.image})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:H,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors duration-200",title:"Copy logs",children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:X,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors duration-200",title:"Download logs",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(!1),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:e.jsx(Z,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(80vh - 120px)"},children:U?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-3"}),e.jsx("span",{className:"text-gray-600",children:"Loading logs..."})]}):m.length>0?e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-300",children:m.map((s,a)=>e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"text-gray-500 mr-2",children:new Date().toLocaleTimeString()}),e.jsx("span",{className:"whitespace-pre-wrap",children:s})]},a))}):e.jsxs("div",{className:"flex items-center justify-center py-12 text-gray-500",children:[e.jsx(y,{className:"w-8 h-8 mr-3"}),e.jsx("span",{children:"No logs available"})]})})]})})]})}export{ve as default};
//# sourceMappingURL=Containers-81bdf239.js.map

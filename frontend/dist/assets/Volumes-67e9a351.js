import{j as e}from"./charts-aae23e34.js";import{r as n}from"./vendor-280e31ee.js";import{a as c}from"./api-f33f6490.js";import{D as w}from"./database-c04929e4.js";import{S as v,P as E,H as C}from"./index-e694318b.js";import{T as S}from"./trash-2-539387ab.js";import"./utils-9456a7ed.js";function z(){const[f,g]=n.useState([]),[j,o]=n.useState(!0),[d,i]=n.useState(null),[l,p]=n.useState(""),r=async()=>{try{o(!0);const s=await fetch(c("/api/volumes"));if(!s.ok)throw new Error("Failed to fetch volumes");const b=(await s.json()).data.map(a=>{var h,u;return{id:a.name,name:a.name,driver:a.driver,mountPoint:a.mountpoint,created:new Date(a.created).toLocaleString(),size:(h=a.usage)!=null&&h.Size?`${(a.usage.Size/1024/1024).toFixed(1)}MB`:"Unknown",containers:((u=a.usage)==null?void 0:u.RefCount)||0,labels:a.labels||{},status:"active"}});g(b)}catch(s){i(s instanceof Error?s.message:"Failed to fetch volumes")}finally{o(!1)}};n.useEffect(()=>{r();const s=setInterval(r,1e4);return()=>clearInterval(s)},[]);const m=f.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.driver.toLowerCase().includes(l.toLowerCase())),y=async()=>{const s=prompt("Enter volume name:");if(s)try{if(!(await fetch(c("/api/volumes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s})})).ok)throw new Error("Failed to create volume");await r()}catch(t){i(t instanceof Error?t.message:"Failed to create volume")}},N=async s=>{if(confirm("Are you sure you want to delete this volume?"))try{if(!(await fetch(c(`/api/volumes/${s}`),{method:"DELETE"})).ok)throw new Error("Failed to delete volume");await r()}catch(t){i(t instanceof Error?t.message:"Failed to delete volume")}};return j?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-light text-gray-900 mb-2",children:"Loading Volumes..."}),e.jsx("p",{className:"text-gray-500",children:"Fetching Docker volumes"})]})}):d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(w,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-light text-gray-900 mb-2",children:"Error Loading Volumes"}),e.jsx("p",{className:"text-gray-500 mb-4",children:d}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-lg transition-colors duration-200",children:"Retry"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-3xl font-light text-gray-900 tracking-tight",children:"Volumes"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search volumes...",value:l,onChange:s=>p(s.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-lg transition-colors duration-200",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Create Volume"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${s.status==="active"?"bg-green-500":"bg-gray-400"}`}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>N(s.id),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(S,{className:"w-4 h-4 text-gray-500"})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Driver:"}),e.jsx("span",{className:"font-medium",children:s.driver})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Mount Point:"}),e.jsx("span",{className:"font-medium text-xs truncate max-w-[150px]",title:s.mountPoint,children:s.mountPoint})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Size:"}),e.jsx("span",{className:"font-medium",children:s.size})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Containers:"}),e.jsx("span",{className:"font-medium",children:s.containers})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Created:"}),e.jsx("span",{className:"font-medium",children:s.created})]}),Object.keys(s.labels).length>0&&e.jsxs("div",{className:"flex items-start justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Labels:"}),e.jsx("div",{className:"flex flex-wrap gap-1 max-w-[150px]",children:Object.entries(s.labels).slice(0,2).map(([t,x])=>e.jsx("span",{className:"text-xs bg-gray-100 px-1 py-0.5 rounded",title:`${t}: ${x}`,children:t},t))})]})]})]},s.id))}),m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No volumes found"}),e.jsx("p",{className:"text-gray-500",children:"Get started by creating your first Docker volume"})]})]})})}export{z as default};
//# sourceMappingURL=Volumes-67e9a351.js.map
